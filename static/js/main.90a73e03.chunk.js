(window["webpackJsonpreact-map"]=window["webpackJsonpreact-map"]||[]).push([[0],{32:function(e,t,a){e.exports=a(59)},37:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(26),c=a.n(o),i=a(4),s=a(5),l=a(7),m=a(6),u=a(8),p=(a(37),a(31)),d=a(10),g=a(30),h=a(15),f="mark",k=function(e){var t=e.mark,a=e.deletePoint,o=e.moveMark,c=e.index,i=Object(n.useRef)(null),s=Object(d.d)({accept:f,hover:function(e,t){if(i.current){var a=e.index,n=c;if(a!==n){var r=i.current.getBoundingClientRect(),s=(r.bottom-r.top)/2,l=t.getClientOffset().y-r.top;a<n&&l<s||a>n&&l>s||(o(a,n),e.index=n)}}}}),l=Object(h.a)(s,2)[1],m=t.id,u=Object(d.c)({item:{type:f,id:m,index:c}});return(0,Object(h.a)(u,2)[1])(l(i)),r.a.createElement("div",{className:"point-item",ref:i},r.a.createElement("p",{className:"point-name"},t.title),r.a.createElement("span",{className:"point-delete",onClick:a},"x"))},y=function(e){var t=e.marks,a=e.deletePoint,n=e.moveMark;return r.a.createElement("div",{className:"point-list"},t.map(function(e,t){return r.a.createElement(k,{key:"point-".concat(t),mark:e,deletePoint:function(){a(e)},moveMark:n,index:t})}))},v=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={inputValue:""},a.handleInputChange=function(e){a.setState({inputValue:e.target.value})},a.handleInputEnter=function(e){if("Enter"===e.key){var t=e.target.value;a.setState({inputValue:""}),a.props.addMark(t)}},a.deletePoint=function(e){a.props.removeMark(e)},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"point-list-container"},r.a.createElement("input",{type:"text",autoComplete:"off",placeholder:"press enter to add point",value:this.state.inputValue,onChange:this.handleInputChange,onKeyPress:this.handleInputEnter}),r.a.createElement(d.b,{backend:g.a},r.a.createElement(y,Object.assign({},this.props,{deletePoint:this.deletePoint}))))}}]),t}(n.Component),b=a(11),E=a(29),O=a.n(E),j=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).setAddress=function(e){O.a.get("https://geocode-maps.yandex.ru/1.x/?apikey=".concat(a.state.apikey,"&geocode=").concat(e.geometry[1],",").concat(e.geometry[0],"&results=1&format=json")).then(function(t){var n=t.data.response.GeoObjectCollection.featureMember[0].GeoObject.name;n&&(e.address=n,a.forceUpdate())})},a.onDragEnd=function(e,t){t.geometry=e.get("target").geometry.getCoordinates(),a.setAddress(t)},a.getAllCoordinates=function(){return a.props.marks.map(function(e){return e.geometry&&0!==e.geometry.length?e.geometry:a.map.current.getCenter()})},a.changeApiKey=function(e){a.setState({apikey:e.target.value})},a.map=r.a.createRef(),a.state={apikey:""},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(){var e=this;this.props.marks.forEach(function(t){t.geometry&&0!==t.geometry.length||(t.geometry=e.map.current.getCenter(),e.setAddress(t))})}},{key:"render",value:function(){var e=this,t=this.props,a=t.marks,o=t.mapDefaultState,c=t.mapWidth,i=t.mapHeight;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"yandex-map-container"},r.a.createElement(b.d,null,r.a.createElement(b.a,{defaultState:o,style:{height:i,width:c},instanceRef:this.map},a.map(function(t,a){return r.a.createElement(b.b,{geometry:t.geometry,options:{draggable:!0},key:"".concat(t.title,"-").concat(a),onDragEnd:function(a){e.onDragEnd(a,t)},modules:["geoObject.addon.balloon","geoObject.addon.hint"],properties:{hintContent:t.address,balloonContent:"<p>".concat(t.title,"</p><p>").concat(t.address,"</p>")}})}),r.a.createElement(b.c,{geometry:{type:"LineString",coordinates:this.getAllCoordinates()},options:{strokeWidth:4,strokeColor:"000000",draggable:!1,strokeOpacity:.5}})))),r.a.createElement("div",{className:"api",style:{display:"flex",flexDirection:"column"}},r.a.createElement("p",null,"API_KEY:"),r.a.createElement("input",{onChange:function(t){e.changeApiKey(t)}}),r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://yandex.ru/dev/locator/keys/get/",style:{textDecoration:"none"}},"Get yandex api key")))}}]),t}(n.Component),C=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={marks:[]},a.addMark=function(e){var t=a.getMarks(),n={title:e,id:a.state.marks.length,geometry:[]};a.setState({marks:[].concat(Object(p.a)(t),[n])})},a.removeMark=function(e){var t=a.getMarks(),n=0;t.find(function(t,a){return t.id===e.id&&(n=a),t.id===e.id}),t.splice(n,1),a.setState({marks:t})},a.moveMark=function(e,t){var n=a.getMarks(),r=n[e];n.splice(e,1),n.splice(t,0,r),a.setState({marks:n})},a.getMarks=function(){return a.state.marks.slice()},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement(v,{addMark:this.addMark,removeMark:this.removeMark,moveMark:this.moveMark,marks:this.getMarks()}),r.a.createElement(j,{marks:this.getMarks(),mapDefaultState:{center:[55.75,37.57],zoom:11},mapWidth:"400px",mapHeight:"400px"}))}}]),t}(n.Component),M=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement(C,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[32,1,2]]]);
//# sourceMappingURL=main.90a73e03.chunk.js.map